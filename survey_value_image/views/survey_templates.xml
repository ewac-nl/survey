<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Insert CSS in the frontend assets -->
    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Survey Upload File Assets">
        <xpath expr="." position="inside">
            <link rel="stylesheet" href="/survey_value_image/static/src/css/survey_value_image.css"/>
        </xpath>
    </template>
    <!-- Insert image when rendering questions in the frontend -->
    <template id="question_suggested_value_image" name="Image from the question suggested answer">
        <div t-if="question.allow_value_image and label.value_image"
            t-field="label.value_image" class="survey_value_image"
            t-options='{"widget": "image", "alt-field": "name", "itemprop": "image"}'/>
    </template>
    <!-- Set an attribute if the question allows value images, used as a CSS selector -->
    <template id="template_page" inherit_id="survey.page">
        <xpath expr="//div[contains(concat(' ', normalize-space(@class), ' '), ' js_question-wrapper ')]"
               position="attributes">
            <attribute name="t-att-allow_value_image">question.allow_value_image</attribute>
        </xpath>
    </template>
    <!-- Refer to the sub template rendering the image for simple choices -->
    <template id="simple_choice" inherit_id="survey.simple_choice">
        <xpath expr="//span[@t-field='label.value']" position="after">
            <t t-call="survey_value_image.question_suggested_value_image"/>
        </xpath>
    </template>
    <!-- Refer to the sub template rendering the image for multi choices -->
    <template id="multiple_choice" inherit_id="survey.multiple_choice">
        <xpath expr="//span[@t-field='label.value']" position="after">
            <t t-call="survey_value_image.question_suggested_value_image"/>
        </xpath>
    </template>
</odoo>
